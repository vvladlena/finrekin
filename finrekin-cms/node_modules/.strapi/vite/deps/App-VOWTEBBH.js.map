{
  "version": 3,
  "sources": ["../../../@strapi/upload/admin/src/hooks/useBulkEdit.ts", "../../../@strapi/upload/admin/src/ai/components/AIAssetCard.tsx", "../../../@strapi/upload/admin/src/ai/components/AIUploadModal.tsx", "../../../@strapi/upload/admin/src/components/FolderCard/FolderCardCheckbox/FolderCardCheckbox.tsx", "../../../@strapi/upload/admin/src/hooks/useAiAvailability.ts", "../../../@strapi/upload/admin/src/utils/getBreadcrumbDataML.ts", "../../../@strapi/upload/admin/src/pages/App/MediaLibrary/components/BulkDeleteButton.tsx", "../../../@strapi/upload/admin/src/hooks/useBulkMove.ts", "../../../@strapi/upload/admin/src/components/BulkMoveDialog/BulkMoveDialog.tsx", "../../../@strapi/upload/admin/src/pages/App/MediaLibrary/components/BulkMoveButton.tsx", "../../../@strapi/upload/admin/src/pages/App/MediaLibrary/components/BulkActions.tsx", "../../../@strapi/upload/admin/src/pages/App/MediaLibrary/components/EmptyOrNoPermissions.tsx", "../../../@strapi/upload/admin/src/pages/App/MediaLibrary/components/Filters.tsx", "../../../@strapi/upload/admin/src/pages/App/MediaLibrary/components/Header.tsx", "../../../@strapi/upload/admin/src/pages/App/MediaLibrary/MediaLibrary.tsx", "../../../@strapi/upload/admin/src/pages/App/App.tsx"],
  "sourcesContent": ["import { useNotification, useFetchClient } from '@strapi/admin/strapi-admin';\nimport { useIntl } from 'react-intl';\nimport { useMutation, useQueryClient } from 'react-query';\n\nimport { BulkUpdateFiles } from '../../../shared/contracts/files';\nimport { pluginId } from '../pluginId';\nimport { getTrad } from '../utils';\n\ninterface FileInfoUpdate {\n  name: string;\n  alternativeText: string | null;\n  caption: string | null;\n  folder: number | null;\n}\n\ninterface BulkEditParams {\n  updates: Array<{\n    id: number;\n    fileInfo: FileInfoUpdate;\n  }>;\n}\n\nexport const useBulkEdit = () => {\n  const { formatMessage } = useIntl();\n  const { toggleNotification } = useNotification();\n  const queryClient = useQueryClient();\n  const { post } = useFetchClient();\n\n  const bulkEditQuery = ({ updates }: BulkEditParams) => {\n    return post('/upload/actions/bulk-update', { updates });\n  };\n\n  const mutation = useMutation<\n    BulkUpdateFiles.Response,\n    BulkUpdateFiles.Response['error'],\n    BulkEditParams\n  >(bulkEditQuery, {\n    onSuccess(res) {\n      const { data } = res;\n\n      if (data && data.length > 0) {\n        queryClient.refetchQueries([pluginId, 'assets'], { active: true });\n        queryClient.refetchQueries([pluginId, 'asset-count'], { active: true });\n        queryClient.refetchQueries([pluginId, 'folders'], { active: true });\n      }\n\n      toggleNotification({\n        type: 'success',\n        message: formatMessage({\n          id: getTrad('modal.edit.success-label'),\n          defaultMessage: 'Files have been successfully updated.',\n        }),\n      });\n    },\n  });\n\n  const edit = (\n    updates: Array<{\n      id: number;\n      fileInfo: FileInfoUpdate;\n    }>\n  ) => mutation.mutateAsync({ updates });\n\n  return { ...mutation, edit };\n};\n", "import * as React from 'react';\n\nimport { ConfirmDialog } from '@strapi/admin/strapi-admin';\nimport {\n  Box,\n  Card,\n  CardAction,\n  CardAsset,\n  CardBadge,\n  CardBody,\n  CardContent,\n  CardHeader,\n  CardSubtitle,\n  CardTitle,\n  CardTimer,\n  Field,\n  Flex,\n  Grid,\n  TextInput,\n  Typography,\n  IconButton,\n  Dialog,\n  Modal,\n} from '@strapi/design-system';\nimport { Pencil, Sparkle, Trash } from '@strapi/icons';\nimport { useIntl } from 'react-intl';\nimport { styled } from 'styled-components';\n\nimport { AudioPreview } from '../../components/AssetCard/AudioPreview';\nimport { VideoPreview } from '../../components/AssetCard/VideoPreview';\nimport { type Asset, EditAssetContent } from '../../components/EditAssetDialog/EditAssetContent';\nimport { AssetType, DocType } from '../../enums';\nimport { useMediaLibraryPermissions } from '../../hooks/useMediaLibraryPermissions';\nimport { useRemoveAsset } from '../../hooks/useRemoveAsset';\nimport {\n  formatBytes,\n  formatDuration,\n  getFileExtension,\n  getTrad,\n  prefixFileUrlWithBackendUrl,\n} from '../../utils';\nimport { typeFromMime } from '../../utils/typeFromMime';\n\nimport { useAIUploadModalContext } from './AIUploadModal';\n\nimport type { File } from '../../../../shared/contracts/files';\n\nconst CardActionsContainer = styled(CardAction)`\n  opacity: 0;\n  z-index: 1;\n\n  &:focus-within {\n    opacity: 1;\n  }\n`;\n\nconst CardContainer = styled(Box)`\n  background: ${({ theme }) => theme.colors.neutral0};\n  border: 1px solid ${({ theme }) => theme.colors.neutral150};\n  border-radius: ${({ theme }) => theme.borderRadius};\n\n  &:hover {\n    ${CardActionsContainer} {\n      opacity: 1;\n    }\n  }\n`;\n\n/* -------------------------------------------------------------------------------------------------\n * AssetCardActions\n * -----------------------------------------------------------------------------------------------*/\n\nconst AssetCardActions = ({ asset }: { asset: File }) => {\n  const { formatMessage } = useIntl();\n  const dispatch = useAIUploadModalContext('AssetCardActions', (s) => s.dispatch);\n  const state = useAIUploadModalContext('AssetCardActions', (s) => s.state);\n  const onClose = useAIUploadModalContext('AssetCardActions', (s) => s.onClose);\n  const { canUpdate, canCopyLink, canDownload } = useMediaLibraryPermissions();\n\n  const [isEditModalOpen, setIsEditModalOpen] = React.useState(false);\n\n  const { removeAsset } = useRemoveAsset(() => {});\n\n  const handleConfirmRemove = async (event?: React.MouseEvent<HTMLButtonElement, MouseEvent>) => {\n    event?.preventDefault();\n    await removeAsset(asset.id);\n    dispatch({\n      type: 'remove_uploaded_asset',\n      payload: { id: asset.id },\n    });\n\n    // Close modal if this was the last asset\n    if (state.uploadedAssets.length === 1) {\n      onClose();\n    }\n  };\n\n  const handlePropagationClick = (event: React.MouseEvent) => {\n    event.stopPropagation();\n  };\n\n  const handleEditAsset = (editedAsset?: File | null) => {\n    if (editedAsset) {\n      dispatch({\n        type: 'edit_uploaded_asset',\n        payload: { editedAsset },\n      });\n\n      setIsEditModalOpen(false);\n    }\n  };\n\n  return (\n    <CardActionsContainer onClick={handlePropagationClick} position=\"end\">\n      <Dialog.Root>\n        <Dialog.Trigger>\n          <IconButton\n            label={formatMessage({\n              id: getTrad('control-card.remove-selection'),\n              defaultMessage: 'Remove from selection',\n            })}\n          >\n            <Trash />\n          </IconButton>\n        </Dialog.Trigger>\n        <ConfirmDialog onConfirm={handleConfirmRemove} />\n      </Dialog.Root>\n\n      <Modal.Root open={isEditModalOpen} onOpenChange={setIsEditModalOpen}>\n        <Modal.Trigger>\n          <IconButton\n            label={formatMessage({ id: getTrad('control-card.edit'), defaultMessage: 'Edit' })}\n          >\n            <Pencil />\n          </IconButton>\n        </Modal.Trigger>\n        <Modal.Content>\n          <EditAssetContent\n            // Is Local must be set to false to trigger the correct branch of logic in the EditAssetContent on submit\n            asset={\n              {\n                ...asset,\n                isLocal: false,\n                folder: typeof asset.folder === 'number' ? { id: asset.folder } : asset.folder,\n              } as Asset\n            }\n            onClose={(arg) => handleEditAsset(arg as File)}\n            canUpdate={canUpdate}\n            canCopyLink={canCopyLink}\n            canDownload={canDownload}\n            omitFields={['caption', 'alternativeText']}\n            omitActions={['replace']}\n          />\n        </Modal.Content>\n      </Modal.Root>\n    </CardActionsContainer>\n  );\n};\n\n/* -------------------------------------------------------------------------------------------------\n * Asset\n * -----------------------------------------------------------------------------------------------*/\n\ninterface AssetProps {\n  assetType: AssetType | DocType;\n  thumbnailUrl: string;\n  assetUrl: string;\n  asset: File;\n}\n\ninterface AssetCardProps {\n  asset: File;\n  onCaptionChange: (caption: string) => void;\n  onAltTextChange: (altText: string) => void;\n  wasCaptionChanged: boolean;\n  wasAltTextChanged: boolean;\n}\n\nconst Extension = styled.span`\n  text-transform: uppercase;\n`;\n\nconst VideoPreviewWrapper = styled(Box)`\n  position: relative;\n  height: 100%;\n  overflow: hidden;\n\n  canvas,\n  video {\n    display: block;\n    pointer-events: none;\n    width: 100%;\n    height: 100%;\n    object-fit: cover;\n    border-radius: ${({ theme }) => theme.borderRadius};\n  }\n`;\n\nconst VideoTimerOverlay = styled(CardTimer)`\n  position: absolute;\n  bottom: 0.5rem;\n  right: 0.5rem;\n`;\n\nconst AudioPreviewWrapper = styled(Box)`\n  height: 100%;\n  overflow: hidden;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n\n  canvas,\n  audio {\n    display: block;\n    max-width: 100%;\n    max-height: 100%;\n  }\n`;\n\nconst Asset = ({ assetType, thumbnailUrl, assetUrl, asset }: AssetProps) => {\n  const [duration, setDuration] = React.useState<number>();\n  const formattedDuration = duration ? formatDuration(duration) : undefined;\n\n  switch (assetType) {\n    case AssetType.Image:\n      return <CardAsset src={thumbnailUrl} size=\"S\" alt={asset.alternativeText || asset.name} />;\n    case AssetType.Video:\n      return (\n        <CardAsset size=\"S\">\n          <VideoPreviewWrapper>\n            <VideoPreview\n              url={assetUrl}\n              mime={asset.mime || 'video/mp4'}\n              onLoadDuration={setDuration}\n              alt={asset.alternativeText || asset.name}\n            />\n            {formattedDuration && <VideoTimerOverlay>{formattedDuration}</VideoTimerOverlay>}\n          </VideoPreviewWrapper>\n        </CardAsset>\n      );\n    case AssetType.Audio:\n      return (\n        <CardAsset size=\"S\">\n          <AudioPreviewWrapper>\n            <AudioPreview url={assetUrl} alt={asset.alternativeText || asset.name} />\n          </AudioPreviewWrapper>\n        </CardAsset>\n      );\n    default:\n      return <CardAsset src={thumbnailUrl} size=\"S\" alt={asset.alternativeText || asset.name} />;\n  }\n};\n\n/* -------------------------------------------------------------------------------------------------\n * AssetCard\n * -----------------------------------------------------------------------------------------------*/\n\nconst StyledCardBody = styled(CardBody)`\n  display: flex;\n  padding: ${({ theme }) => theme.spaces[2]} ${({ theme }) => theme.spaces[1]};\n`;\n\nconst StyledCard = styled(Card)`\n  width: 100%;\n  height: 100%;\n  border: none;\n  box-shadow: none;\n  border-radius: 0;\n  padding: 0;\n`;\n\nconst getAssetBadgeLabel = (assetType: AssetType | DocType) => {\n  switch (assetType) {\n    case AssetType.Image:\n      return { id: getTrad('settings.section.image.label'), defaultMessage: 'IMAGE' };\n    case AssetType.Video:\n      return { id: getTrad('settings.section.video.label'), defaultMessage: 'VIDEO' };\n    case AssetType.Audio:\n      return { id: getTrad('settings.section.audio.label'), defaultMessage: 'AUDIO' };\n    case DocType.Pdf:\n      return { id: getTrad('settings.section.pdf.label'), defaultMessage: 'PDF' };\n    case DocType.Csv:\n      return { id: getTrad('settings.section.csv.label'), defaultMessage: 'CSV' };\n    case DocType.Xls:\n      return { id: getTrad('settings.section.xls.label'), defaultMessage: 'XLS' };\n    case DocType.Zip:\n      return { id: getTrad('settings.section.zip.label'), defaultMessage: 'ZIP' };\n    default:\n      return { id: getTrad('settings.section.doc.label'), defaultMessage: 'DOC' };\n  }\n};\n\nexport const AIAssetCard = ({\n  asset,\n  onCaptionChange,\n  onAltTextChange,\n  wasAltTextChanged,\n  wasCaptionChanged,\n}: AssetCardProps) => {\n  const { formatMessage } = useIntl();\n\n  const assetType = typeFromMime(asset.mime || '');\n  const thumbnailUrl =\n    prefixFileUrlWithBackendUrl(asset?.formats?.thumbnail?.url || asset.url) || '';\n  const assetUrl = prefixFileUrlWithBackendUrl(asset.url) || '';\n  const subtitle = asset.height && asset.width ? ` - ${asset.width}x${asset.height}` : '';\n  const formattedSize = asset.size ? formatBytes(asset.size) : '';\n  const fullSubtitle = `${subtitle}${subtitle && formattedSize ? ' - ' : ''}${formattedSize}`;\n\n  const [caption, setCaption] = React.useState(asset.caption || '');\n  React.useEffect(() => {\n    onCaptionChange(caption);\n  }, [caption, onCaptionChange]);\n\n  const [altText, setAltText] = React.useState(asset.alternativeText || '');\n  React.useEffect(() => {\n    onAltTextChange(altText);\n  }, [altText, onAltTextChange]);\n\n  return (\n    <CardContainer>\n      <Grid.Root>\n        <Grid.Item col={5} alignItems=\"stretch\">\n          <StyledCard width=\"100%\" height=\"100%\" shadow=\"none\" borderRadius={0} padding={0}>\n            <CardHeader style={{ borderStyle: 'none' }}>\n              <AssetCardActions asset={asset} />\n              <Asset\n                assetType={assetType}\n                thumbnailUrl={thumbnailUrl}\n                assetUrl={assetUrl}\n                asset={asset}\n              />\n            </CardHeader>\n            <StyledCardBody>\n              <CardContent width=\"100%\">\n                <Flex justifyContent=\"space-between\" alignItems=\"start\">\n                  <Typography tag=\"h2\">\n                    <CardTitle tag=\"span\">{asset.name}</CardTitle>\n                  </Typography>\n                  <CardBadge>{formatMessage(getAssetBadgeLabel(assetType))}</CardBadge>\n                </Flex>\n                <Flex>\n                  <CardSubtitle>\n                    <Extension>{getFileExtension(asset.ext)}</Extension>\n                    {fullSubtitle}\n                  </CardSubtitle>\n                </Flex>\n              </CardContent>\n            </StyledCardBody>\n          </StyledCard>\n        </Grid.Item>\n\n        <Grid.Item col={7} flex={1}>\n          <Flex direction=\"column\" height=\"100%\" alignItems=\"stretch\" flex={1} padding={4} gap={2}>\n            <Field.Root name=\"caption\">\n              <Flex alignItems=\"center\" gap={2}>\n                <Field.Label>\n                  {formatMessage({\n                    id: getTrad('form.input.label.file-caption'),\n                    defaultMessage: 'Caption',\n                  })}\n                </Field.Label>\n              </Flex>\n              <TextInput\n                value={caption}\n                onChange={(e) => setCaption(e.target.value)}\n                placeholder={formatMessage({\n                  id: getTrad('form.input.placeholder.file-caption'),\n                  defaultMessage: 'Enter caption',\n                })}\n                endAction={\n                  !wasCaptionChanged &&\n                  asset.caption && <Sparkle width=\"16px\" height=\"16px\" fill=\"#AC73E6\" />\n                }\n                type=\"text\"\n              />\n            </Field.Root>\n\n            <Field.Root\n              name=\"alternativeText\"\n              hint={formatMessage({\n                id: getTrad('form.input.description.file-alt'),\n                defaultMessage: \"This text will be displayed if the asset can't be shown.\",\n              })}\n            >\n              <Flex alignItems=\"center\" gap={2}>\n                <Field.Label>\n                  {formatMessage({\n                    id: getTrad('form.input.label.file-alt'),\n                    defaultMessage: 'Alternative text',\n                  })}\n                </Field.Label>\n              </Flex>\n\n              <TextInput\n                value={altText}\n                onChange={(e) => setAltText(e.target.value)}\n                placeholder={formatMessage({\n                  id: getTrad('form.input.placeholder.file-alt'),\n                  defaultMessage: 'Enter alternative text',\n                })}\n                endAction={\n                  !wasAltTextChanged &&\n                  asset.alternativeText && <Sparkle width=\"16px\" height=\"16px\" fill=\"#AC73E6\" />\n                }\n                type=\"text\"\n              />\n              <Field.Hint />\n            </Field.Root>\n          </Flex>\n        </Grid.Item>\n      </Grid.Root>\n    </CardContainer>\n  );\n};\n\n/* -------------------------------------------------------------------------------------------------\n * AssetCardSkeletons\n * -----------------------------------------------------------------------------------------------*/\n\nconst SkeletonBox = styled(Box)<{ width?: string; height?: string }>`\n  background: linear-gradient(\n    90deg,\n    ${({ theme }) => theme.colors.neutral100} 25%,\n    ${({ theme }) => theme.colors.neutral150} 50%,\n    ${({ theme }) => theme.colors.neutral100} 75%\n  );\n  background-size: 200% 100%;\n  animation: loading 1.5s infinite;\n  border-radius: ${({ theme }) => theme.borderRadius};\n  width: ${({ width }) => width || '100%'};\n  height: ${({ height }) => height || '1rem'};\n\n  @keyframes loading {\n    0% {\n      background-position: 200% 0;\n    }\n    100% {\n      background-position: -200% 0;\n    }\n  }\n`;\n\nexport const AIAssetCardSkeletons = ({ count = 1 }: { count?: number }) => {\n  const skeletons = Array.from({ length: count }, (_, i) => i);\n\n  return skeletons.map((index) => (\n    <Box\n      key={index}\n      background=\"neutral0\"\n      borderColor=\"neutral150\"\n      borderStyle=\"solid\"\n      borderWidth=\"1px\"\n      borderRadius=\"4px\"\n      marginBottom={4}\n    >\n      <Grid.Root>\n        <Grid.Item col={5} alignItems=\"stretch\">\n          <Card\n            height=\"100%\"\n            width=\"100%\"\n            borderStyle=\"none\"\n            shadow=\"none\"\n            borderRadius={0}\n            padding={2}\n          >\n            <Box height=\"150px\" padding={2}>\n              <SkeletonBox height=\"100%\" />\n            </Box>\n            <CardBody style={{ display: 'flex', padding: '8px 4px' }}>\n              <CardContent width=\"100%\">\n                <Flex justifyContent=\"space-between\" alignItems=\"start\" marginBottom={1}>\n                  <SkeletonBox width=\"60%\" height=\"18px\" />\n                  <SkeletonBox width=\"40px\" height=\"16px\" />\n                </Flex>\n                <SkeletonBox width=\"80%\" height=\"14px\" />\n              </CardContent>\n            </CardBody>\n          </Card>\n        </Grid.Item>\n\n        <Grid.Item col={7} flex={1}>\n          <Flex direction=\"column\" height=\"100%\" alignItems=\"stretch\" flex={1} padding={4} gap={2}>\n            <Box>\n              <SkeletonBox width=\"60px\" height=\"16px\" marginBottom={1} />\n              <SkeletonBox height=\"32px\" />\n            </Box>\n\n            <Box>\n              <SkeletonBox width=\"100px\" height=\"16px\" marginBottom={1} />\n              <SkeletonBox height=\"32px\" />\n              <Box marginTop={1}>\n                <SkeletonBox width=\"70%\" height=\"12px\" />\n              </Box>\n            </Box>\n          </Flex>\n        </Grid.Item>\n      </Grid.Root>\n    </Box>\n  ));\n};\n", "import * as React from 'react';\n\nimport { createContext } from '@strapi/admin/strapi-admin';\nimport { Alert, Button, Flex, Modal } from '@strapi/design-system';\nimport { produce } from 'immer';\nimport { useIntl } from 'react-intl';\nimport { styled } from 'styled-components';\n\nimport {\n  AddAssetStep,\n  FileWithRawFile,\n} from '../../components/UploadAssetDialog/AddAssetStep/AddAssetStep';\nimport { useBulkEdit } from '../../hooks/useBulkEdit';\nimport { useTracking } from '../../hooks/useTracking';\nimport { useUpload } from '../../hooks/useUpload';\nimport { getTrad } from '../../utils';\n\nimport { AIAssetCard, AIAssetCardSkeletons } from './AIAssetCard';\n\nimport type { File } from '../../../../shared/contracts/files';\n\n/* -------------------------------------------------------------------------------------------------\n * ModalBody\n * -----------------------------------------------------------------------------------------------*/\n\nconst StyledModalBody = styled(Modal.Body)`\n  padding: 0;\n  display: flex;\n  justify-content: center;\n\n  [data-radix-scroll-area-viewport] {\n    padding-top: ${({ theme }) => theme.spaces[6]};\n    padding-bottom: ${({ theme }) => theme.spaces[6]};\n    padding-left: ${({ theme }) => theme.spaces[7]};\n    padding-right: ${({ theme }) => theme.spaces[7]};\n  }\n`;\n\nconst StyledAlert = styled(Alert)`\n  & > button {\n    display: none;\n  }\n`;\n\nconst ModalContent = ({ onClose }: Pick<AIUploadModalProps, 'onClose'>) => {\n  const { formatMessage } = useIntl();\n  const state = useAIUploadModalContext('ModalContent', (s) => s.state);\n  const dispatch = useAIUploadModalContext('ModalContent', (s) => s.dispatch);\n  const folderId = useAIUploadModalContext('ModalContent', (s) => s.folderId);\n  const { upload } = useUpload();\n  const { edit, isLoading: isSaving } = useBulkEdit();\n  const [isUploading, setIsUploading] = React.useState(false);\n  const [uploadError, setUploadError] = React.useState<Error | null>(null);\n  const { trackUsage } = useTracking();\n\n  const handleCaptionChange = (assetId: number, caption: string) => {\n    dispatch({\n      type: 'set_uploaded_asset_caption',\n      payload: { id: assetId, caption },\n    });\n  };\n\n  const handleAltTextChange = (assetId: number, altText: string) => {\n    dispatch({\n      type: 'set_uploaded_asset_alt_text',\n      payload: { id: assetId, altText },\n    });\n  };\n\n  const resetState = () => {\n    dispatch({ type: 'set_uploaded_assets', payload: [] });\n  };\n\n  const handleFinish = async () => {\n    if (state.hasUnsavedChanges) {\n      const assetsToUpdate = state.uploadedAssets.filter(\n        (asset) => (asset.wasCaptionChanged || asset.wasAltTextChanged) && asset.file.id\n      );\n\n      if (assetsToUpdate.length > 0) {\n        if (assetsToUpdate.some((asset) => asset.wasCaptionChanged)) {\n          trackUsage('didEditAICaption');\n        }\n\n        if (assetsToUpdate.some((asset) => asset.wasAltTextChanged)) {\n          trackUsage('didEditAIAlternativeText');\n        }\n\n        // Update assets\n        const updates = assetsToUpdate.map((asset) => ({\n          id: asset.file.id!,\n          fileInfo: {\n            name: asset.file.name,\n            alternativeText: asset.file.alternativeText ?? null,\n            caption: asset.file.caption ?? null,\n            folder:\n              typeof asset.file.folder === 'object' && asset.file.folder !== null\n                ? // @ts-expect-error types are wrong\n                  asset.file.folder.id\n                : asset.file.folder,\n          },\n        }));\n\n        try {\n          await edit(updates);\n          dispatch({ type: 'clear_unsaved_changes' });\n        } catch (err) {\n          console.error('Failed to save asset changes:', err);\n          return; // Don't close modal on error\n        }\n      }\n    }\n\n    resetState();\n    onClose();\n  };\n\n  const handleCancel = () => {\n    resetState();\n    onClose();\n  };\n\n  const handleUpload = async (assets: FileWithRawFile[]) => {\n    dispatch({ type: 'set_assets_to_upload_length', payload: assets.length });\n    setUploadError(null);\n    setIsUploading(true);\n\n    try {\n      const assetsForUpload = assets.map((asset) => ({\n        ...asset,\n        id: asset.id ? Number(asset.id) : undefined,\n      }));\n\n      const uploadedFiles = await upload(assetsForUpload, folderId);\n      const filesWithFolder = uploadedFiles.map((file: File) => ({\n        ...file,\n        // The upload API doesn't populate the folder relation, so we add it manually\n        folder: folderId || file.folder,\n      }));\n      dispatch({ type: 'set_uploaded_assets', payload: filesWithFolder });\n    } catch (error) {\n      console.error('Upload failed:', error);\n      setUploadError(error instanceof Error ? error : new Error('Upload failed'));\n    } finally {\n      setIsUploading(false);\n    }\n  };\n\n  if (state.assetsToUploadLength === 0) {\n    return (\n      <Modal.Content>\n        <AddAssetStep onClose={onClose} onAddAsset={handleUpload} />\n      </Modal.Content>\n    );\n  }\n\n  if (\n    isUploading ||\n    (state.assetsToUploadLength > 0 && state.uploadedAssets.length === 0 && !uploadError)\n  ) {\n    return (\n      <Modal.Content>\n        <Modal.Header>\n          <Modal.Title>\n            {formatMessage({\n              id: getTrad('ai.modal.uploading.title'),\n              defaultMessage: 'Uploading and processing with AI...',\n            })}\n          </Modal.Title>\n        </Modal.Header>\n        <StyledModalBody>\n          <AIAssetCardSkeletons count={state.assetsToUploadLength} />\n        </StyledModalBody>\n      </Modal.Content>\n    );\n  }\n\n  const title = formatMessage(\n    {\n      id: getTrad('ai.modal.title'),\n      defaultMessage:\n        '{count, plural, one {# asset uploaded} other {# assets uploaded}}, review AI generated metadata',\n    },\n    { count: state.uploadedAssets.length }\n  );\n\n  if (uploadError) {\n    return (\n      <Modal.Content>\n        <Modal.Header>\n          <Modal.Title>{title}</Modal.Title>\n        </Modal.Header>\n        <Modal.Body>\n          <StyledAlert closeLabel=\"\" variant=\"danger\">\n            {formatMessage({\n              id: getTrad('ai.modal.error'),\n              defaultMessage: 'Could not generate AI metadata for the uploaded files.',\n            })}\n          </StyledAlert>\n        </Modal.Body>\n        <Modal.Footer>\n          <Button onClick={handleCancel} variant=\"tertiary\">\n            {formatMessage({ id: 'cancel', defaultMessage: 'Cancel' })}\n          </Button>\n          <Button onClick={handleFinish} loading={isSaving}>\n            {formatMessage({ id: 'global.finish', defaultMessage: 'Finish' })}\n          </Button>\n        </Modal.Footer>\n      </Modal.Content>\n    );\n  }\n\n  return (\n    <Modal.Content>\n      <Modal.Header>\n        <Modal.Title>{title}</Modal.Title>\n      </Modal.Header>\n\n      <StyledModalBody>\n        <Flex gap={6} direction=\"column\" alignItems=\"stretch\">\n          {state.uploadedAssets.map(({ file: asset, wasCaptionChanged, wasAltTextChanged }) => (\n            <AIAssetCard\n              key={asset.id}\n              asset={asset}\n              onCaptionChange={(caption: string) =>\n                asset.id && handleCaptionChange(asset.id, caption)\n              }\n              onAltTextChange={(altText: string) =>\n                asset.id && handleAltTextChange(asset.id, altText)\n              }\n              wasCaptionChanged={wasCaptionChanged}\n              wasAltTextChanged={wasAltTextChanged}\n            />\n          ))}\n        </Flex>\n      </StyledModalBody>\n\n      <Modal.Footer>\n        <Button onClick={handleCancel} variant=\"tertiary\">\n          {formatMessage({ id: 'cancel', defaultMessage: 'Cancel' })}\n        </Button>\n        <Button onClick={handleFinish} loading={isSaving}>\n          {formatMessage({ id: 'global.finish', defaultMessage: 'Finish' })}\n        </Button>\n      </Modal.Footer>\n    </Modal.Content>\n  );\n};\n\n/* -------------------------------------------------------------------------------------------------\n * UploadModal\n * -----------------------------------------------------------------------------------------------*/\n\ninterface AIUploadModalProps {\n  open: boolean;\n  onClose: () => void;\n  folderId?: number | null;\n}\n\ntype State = {\n  uploadedAssets: Array<{ file: File; wasCaptionChanged: boolean; wasAltTextChanged: boolean }>;\n  assetsToUploadLength: number;\n  hasUnsavedChanges: boolean;\n};\n\ntype Action =\n  | {\n      type: 'set_uploaded_assets';\n      payload: File[];\n    }\n  | {\n      type: 'set_assets_to_upload_length';\n      payload: number;\n    }\n  | {\n      type: 'set_uploaded_asset_caption';\n      payload: { id: number; caption: string };\n    }\n  | {\n      type: 'set_uploaded_asset_alt_text';\n      payload: { id: number; altText: string };\n    }\n  | {\n      type: 'remove_uploaded_asset';\n      payload: { id: number };\n    }\n  | {\n      type: 'edit_uploaded_asset';\n      payload: { editedAsset: File };\n    }\n  | {\n      type: 'clear_unsaved_changes';\n    };\n\nconst [AIUploadModalContext, useAIUploadModalContext] = createContext<{\n  state: State;\n  dispatch: React.Dispatch<Action>;\n  folderId: number | null;\n  onClose: () => void;\n}>('AIUploadModalContext');\n\nconst reducer = (state: State, action: Action): State => {\n  return produce(state, (draft: State) => {\n    if (action.type === 'set_uploaded_assets') {\n      draft.uploadedAssets = action.payload.map((file) => ({\n        file,\n        wasCaptionChanged: false,\n        wasAltTextChanged: false,\n      }));\n      draft.hasUnsavedChanges = false;\n    }\n\n    if (action.type === 'set_assets_to_upload_length') {\n      draft.assetsToUploadLength = action.payload;\n    }\n\n    if (action.type === 'set_uploaded_asset_caption') {\n      const asset = draft.uploadedAssets.find((a) => a.file.id === action.payload.id);\n      if (asset && asset.file.caption !== action.payload.caption) {\n        asset.file.caption = action.payload.caption;\n        asset.wasCaptionChanged = true;\n        draft.hasUnsavedChanges = true;\n      }\n    }\n\n    if (action.type === 'set_uploaded_asset_alt_text') {\n      const asset = draft.uploadedAssets.find((a) => a.file.id === action.payload.id);\n      if (asset && asset.file.alternativeText !== action.payload.altText) {\n        asset.file.alternativeText = action.payload.altText;\n        asset.wasAltTextChanged = true;\n        draft.hasUnsavedChanges = true;\n      }\n    }\n\n    if (action.type === 'remove_uploaded_asset') {\n      draft.uploadedAssets = draft.uploadedAssets.filter((a) => a.file.id !== action.payload.id);\n    }\n\n    if (action.type === 'edit_uploaded_asset') {\n      const assetIndex = draft.uploadedAssets.findIndex(\n        (a) => a.file.id === action.payload.editedAsset.id\n      );\n      if (assetIndex !== -1) {\n        draft.uploadedAssets[assetIndex] = {\n          file: action.payload.editedAsset,\n          wasCaptionChanged: draft.uploadedAssets[assetIndex].wasCaptionChanged,\n          wasAltTextChanged: draft.uploadedAssets[assetIndex].wasAltTextChanged,\n        };\n      }\n    }\n\n    if (action.type === 'clear_unsaved_changes') {\n      draft.hasUnsavedChanges = false;\n      draft.uploadedAssets.forEach((asset) => {\n        asset.wasCaptionChanged = false;\n        asset.wasAltTextChanged = false;\n      });\n    }\n  });\n};\n\nexport const AIUploadModal = ({ open, onClose, folderId = null }: AIUploadModalProps) => {\n  const [state, dispatch] = React.useReducer(reducer, {\n    uploadedAssets: [],\n    assetsToUploadLength: 0,\n    hasUnsavedChanges: false,\n  });\n\n  const handleClose = React.useCallback(() => {\n    // Reset state when modal closes\n    dispatch({ type: 'set_uploaded_assets', payload: [] });\n    onClose();\n  }, [onClose]);\n\n  return (\n    <AIUploadModalContext\n      state={state}\n      dispatch={dispatch}\n      folderId={folderId}\n      onClose={handleClose}\n    >\n      <Modal.Root open={open} onOpenChange={handleClose}>\n        <ModalContent onClose={handleClose} />\n      </Modal.Root>\n    </AIUploadModalContext>\n  );\n};\n\nexport { useAIUploadModalContext };\n", "import { Checkbox, Box, CheckboxProps } from '@strapi/design-system';\n\nimport { useFolderCard } from '../contexts/FolderCard';\n\nexport const FolderCardCheckbox = (props: CheckboxProps) => {\n  const { id } = useFolderCard();\n\n  return (\n    <Box position=\"relative\" zIndex={2}>\n      <Checkbox aria-labelledby={`${id}-title`} {...props} />\n    </Box>\n  );\n};\n", "import { useAIAvailability as useGlobalAIAvailability } from '@strapi/admin/strapi-admin/ee';\n\nimport { useSettings } from './useSettings';\n\nexport const useAIAvailability = () => {\n  const isAiAvailable = useGlobalAIAvailability();\n  const { status, data } = useSettings(isAiAvailable);\n\n  if (!isAiAvailable) {\n    return { status: 'success' as const, isEnabled: false };\n  }\n\n  return { status, isEnabled: data?.aiMetadata };\n};\n", "import { getFolderURL } from './getFolderURL';\nimport { getTrad } from './getTrad';\n\nimport type { Query } from '../../../shared/contracts/files';\nimport type { Folder } from '../../../shared/contracts/folders';\nimport type { MessageDescriptor } from 'react-intl';\n\ninterface GetBreadcrumbDataMLProps {\n  folder: Folder;\n  options: {\n    pathname: string;\n    query?: Query;\n  };\n}\n\ninterface GetBreadcrumbDataMLReturn {\n  id: number | null;\n  label: string | MessageDescriptor;\n  href?: string;\n}\n\ntype BreadcrumbData = GetBreadcrumbDataMLReturn | [];\n\nexport const getBreadcrumbDataML = (\n  folder: GetBreadcrumbDataMLProps['folder'] | null,\n  { pathname, query }: GetBreadcrumbDataMLProps['options']\n) => {\n  const data: BreadcrumbData[] = [\n    {\n      id: null,\n      label: { id: getTrad('plugin.name'), defaultMessage: 'Media Library' },\n      href: folder ? getFolderURL(pathname, query || {}) : undefined,\n    },\n  ];\n\n  if (folder?.parent && typeof folder?.parent !== 'number' && folder?.parent?.parent) {\n    data.push([]);\n  }\n\n  if (folder?.parent && typeof folder.parent !== 'number') {\n    data.push({\n      id: folder.parent.id,\n      label: folder.parent.name,\n      href: getFolderURL(pathname, query || {}, {\n        folder: folder.parent.id?.toString(),\n        folderPath: folder.parent.path,\n      }),\n    });\n  }\n\n  if (folder) {\n    data.push({\n      id: folder.id,\n      label: folder.name,\n    });\n  }\n\n  return data;\n};\n", "import { ConfirmDialog } from '@strapi/admin/strapi-admin';\nimport { Button, Dialog } from '@strapi/design-system';\nimport { Trash } from '@strapi/icons';\nimport { useIntl } from 'react-intl';\n\nimport { useBulkRemove } from '../../../../hooks/useBulkRemove';\n\nimport type { FolderDefinition } from '../../../../../../shared/contracts/folders';\nimport type { FileWithType } from '../../../../hooks/useBulkRemove';\n\nexport interface BulkDeleteButtonProps {\n  selected: Array<FileWithType | FolderDefinition>;\n  onSuccess: () => void;\n}\n\nexport const BulkDeleteButton = ({ selected, onSuccess }: BulkDeleteButtonProps) => {\n  const { formatMessage } = useIntl();\n  const { remove } = useBulkRemove();\n\n  const handleConfirmRemove = async () => {\n    await remove(selected);\n    onSuccess();\n  };\n\n  return (\n    <Dialog.Root>\n      <Dialog.Trigger>\n        <Button variant=\"danger-light\" size=\"S\" startIcon={<Trash />}>\n          {formatMessage({ id: 'global.delete', defaultMessage: 'Delete' })}\n        </Button>\n      </Dialog.Trigger>\n      <ConfirmDialog onConfirm={handleConfirmRemove} />\n    </Dialog.Root>\n  );\n};\n", "import { useNotification, useFetchClient } from '@strapi/admin/strapi-admin';\nimport { useIntl } from 'react-intl';\nimport { useMutation, useQueryClient } from 'react-query';\n\nimport { File, BulkMoveFiles } from '../../../shared/contracts/files';\nimport { Folder, BulkMoveFolders } from '../../../shared/contracts/folders';\nimport { pluginId } from '../pluginId';\nimport { getTrad } from '../utils';\n\nexport interface FolderWithType extends Folder {\n  type: string;\n}\n\nexport interface FileWithType extends File {\n  type: string;\n}\n\ninterface BulkMoveParams {\n  destinationFolderId: number | string;\n  filesAndFolders: Array<FolderWithType | FileWithType>;\n}\n\n// Define the shape of the accumulator object\ntype Payload = {\n  fileIds?: number[];\n  folderIds?: number[];\n};\n\nexport const useBulkMove = () => {\n  const { formatMessage } = useIntl();\n  const { toggleNotification } = useNotification();\n  const queryClient = useQueryClient();\n  const { post } = useFetchClient();\n\n  const bulkMoveQuery = ({ destinationFolderId, filesAndFolders }: BulkMoveParams) => {\n    const payload = filesAndFolders.reduce<Payload>((acc, selected) => {\n      const { id, type } = selected;\n      const key = type === 'asset' ? 'fileIds' : 'folderIds';\n\n      if (!acc[key]) {\n        acc[key] = [];\n      }\n\n      acc[key]!.push(id);\n\n      return acc;\n    }, {});\n\n    return post('/upload/actions/bulk-move', { ...payload, destinationFolderId });\n  };\n\n  const mutation = useMutation<\n    BulkMoveFolders.Response | BulkMoveFiles.Response,\n    BulkMoveFolders.Response['error'] | BulkMoveFiles.Response['error'],\n    BulkMoveParams\n  >(bulkMoveQuery, {\n    onSuccess(res) {\n      const {\n        data: { data },\n      } = res;\n\n      if (data?.files?.length > 0) {\n        queryClient.refetchQueries([pluginId, 'assets'], { active: true });\n        queryClient.refetchQueries([pluginId, 'asset-count'], { active: true });\n      }\n\n      // folders need to be re-fetched in any case, because assets might have been\n      // moved into a sub-folder and therefore the count needs to be updated\n      queryClient.refetchQueries([pluginId, 'folders'], { active: true });\n\n      toggleNotification({\n        type: 'success',\n        message: formatMessage({\n          id: getTrad('modal.move.success-label'),\n          defaultMessage: 'Elements have been moved successfully.',\n        }),\n      });\n    },\n  });\n\n  const move = (\n    destinationFolderId: number | string,\n    filesAndFolders: Array<FolderWithType | FileWithType>\n  ) => mutation.mutateAsync({ destinationFolderId, filesAndFolders });\n\n  return { ...mutation, move };\n};\n", "import { Button, Flex, Grid, Field, Loader, Modal, Typography } from '@strapi/design-system';\nimport { Form, Formik, FormikErrors } from 'formik';\nimport isEmpty from 'lodash/isEmpty';\nimport { useIntl } from 'react-intl';\n\nimport { File } from '../../../../shared/contracts/files';\nimport { useBulkMove } from '../../hooks/useBulkMove';\nimport { useFolderStructure } from '../../hooks/useFolderStructure';\nimport { getTrad, normalizeAPIError } from '../../utils';\nimport { SelectTree } from '../SelectTree/SelectTree';\n\nimport type { Folder } from '../../../../shared/contracts/folders';\nimport type { OptionSelectTree } from '../SelectTree/SelectTree';\nimport type { FetchError } from '@strapi/admin/strapi-admin';\n\ntype InitialFormData = {\n  destination:\n    | {\n        value: string | number;\n        label: string;\n      }\n    | string;\n};\n\ninterface FolderWithType extends Folder {\n  type: string;\n}\n\ninterface FileWithType extends File {\n  type: string;\n}\n\nexport interface BulkMoveDialogProps {\n  onClose: () => void;\n  selected?: Array<FolderWithType | FileWithType>;\n  currentFolder?: FolderWithType;\n}\n\nexport const BulkMoveDialog = ({ onClose, selected = [], currentFolder }: BulkMoveDialogProps) => {\n  const { formatMessage } = useIntl();\n  const { data: folderStructure, isLoading } = useFolderStructure();\n  const { move } = useBulkMove();\n\n  if (!folderStructure) {\n    return null;\n  }\n\n  const handleSubmit = async (\n    values: InitialFormData,\n    { setErrors }: { setErrors: (errors: FormikErrors<InitialFormData>) => void }\n  ) => {\n    try {\n      if (typeof values.destination !== 'string') {\n        const destinationValue = values.destination.value;\n        await move(destinationValue, selected);\n        onClose();\n      }\n    } catch (error) {\n      const normalizedError = normalizeAPIError(error as FetchError)!;\n\n      if (normalizedError && 'errors' in normalizedError) {\n        const formikErrors = normalizedError.errors?.reduce<Record<string, string>>(\n          (acc, error) => {\n            acc[error.values?.path?.length || 'destination'] = error.defaultMessage;\n\n            return acc;\n          },\n          {}\n        );\n\n        if (!isEmpty(formikErrors)) {\n          setErrors(formikErrors);\n        }\n      }\n    }\n  };\n\n  if (isLoading) {\n    return (\n      <Modal.Content>\n        <Modal.Body>\n          <Flex justifyContent=\"center\" paddingTop={4} paddingBottom={4}>\n            <Loader>\n              {formatMessage({\n                id: getTrad('content.isLoading'),\n                defaultMessage: 'Content is loading.',\n              })}\n            </Loader>\n          </Flex>\n        </Modal.Body>\n      </Modal.Content>\n    );\n  }\n\n  const initialFormData: InitialFormData = {\n    destination: {\n      value: currentFolder?.id || '',\n      label: currentFolder?.name || folderStructure[0].label,\n    },\n  };\n\n  return (\n    <Modal.Content>\n      <Formik validateOnChange={false} onSubmit={handleSubmit} initialValues={initialFormData}>\n        {({ values, errors, setFieldValue }) => (\n          <Form noValidate>\n            <Modal.Header>\n              <Modal.Title>\n                {formatMessage({\n                  id: getTrad('modal.folder.move.title'),\n                  defaultMessage: 'Move elements to',\n                })}\n              </Modal.Title>\n            </Modal.Header>\n\n            <Modal.Body>\n              <Grid.Root gap={4}>\n                <Grid.Item xs={12} col={12} direction=\"column\" alignItems=\"stretch\">\n                  <Field.Root id=\"folder-destination\">\n                    <Field.Label>\n                      {formatMessage({\n                        id: getTrad('form.input.label.folder-location'),\n                        defaultMessage: 'Location',\n                      })}\n                    </Field.Label>\n\n                    <SelectTree\n                      options={folderStructure as OptionSelectTree[]}\n                      onChange={(value: Record<string, string | number>) => {\n                        setFieldValue('destination', value);\n                      }}\n                      defaultValue={\n                        typeof values.destination !== 'string' ? values.destination : undefined\n                      }\n                      name=\"destination\"\n                      menuPortalTarget={document.querySelector('body')}\n                      inputId=\"folder-destination\"\n                      error={errors?.destination}\n                      ariaErrorMessage=\"destination-error\"\n                    />\n\n                    {errors.destination && (\n                      <Typography variant=\"pi\" tag=\"p\" textColor=\"danger600\">\n                        {errors.destination}\n                      </Typography>\n                    )}\n                  </Field.Root>\n                </Grid.Item>\n              </Grid.Root>\n            </Modal.Body>\n\n            <Modal.Footer>\n              <Modal.Close>\n                <Button variant=\"tertiary\" name=\"cancel\">\n                  {formatMessage({ id: 'cancel', defaultMessage: 'Cancel' })}\n                </Button>\n              </Modal.Close>\n              <Button type=\"submit\" loading={isLoading}>\n                {formatMessage({ id: 'modal.folder.move.submit', defaultMessage: 'Move' })}\n              </Button>\n            </Modal.Footer>\n          </Form>\n        )}\n      </Formik>\n    </Modal.Content>\n  );\n};\n", "import * as React from 'react';\n\nimport { Button, Modal } from '@strapi/design-system';\nimport { Folder } from '@strapi/icons';\nimport { useIntl } from 'react-intl';\n\nimport { BulkMoveDialog } from '../../../../components/BulkMoveDialog/BulkMoveDialog';\n\nimport type { File } from '../../../../../../shared/contracts/files';\nimport type { Folder as FolderDefinition } from '../../../../../../shared/contracts/folders';\n\ninterface FolderWithType extends FolderDefinition {\n  type: string;\n}\n\ninterface FileWithType extends File {\n  type: string;\n}\n\nexport interface BulkMoveButtonProps {\n  onSuccess: () => void;\n  currentFolder?: FolderWithType;\n  selected?: Array<FolderWithType | FileWithType>;\n}\n\nexport const BulkMoveButton = ({\n  selected = [],\n  onSuccess,\n  currentFolder,\n}: BulkMoveButtonProps) => {\n  const { formatMessage } = useIntl();\n  const [showConfirmDialog, setShowConfirmDialog] = React.useState(false);\n\n  const handleConfirmMove = () => {\n    setShowConfirmDialog(false);\n    onSuccess();\n  };\n\n  return (\n    <Modal.Root open={showConfirmDialog} onOpenChange={setShowConfirmDialog}>\n      <Modal.Trigger>\n        <Button variant=\"secondary\" size=\"S\" startIcon={<Folder />}>\n          {formatMessage({ id: 'global.move', defaultMessage: 'Move' })}\n        </Button>\n      </Modal.Trigger>\n      <BulkMoveDialog\n        currentFolder={currentFolder}\n        onClose={handleConfirmMove}\n        selected={selected}\n      />\n    </Modal.Root>\n  );\n};\n", "import { Flex, Typography } from '@strapi/design-system';\nimport { useIntl } from 'react-intl';\n\nimport { getTrad } from '../../../../utils';\n\nimport { BulkDeleteButton } from './BulkDeleteButton';\nimport { BulkMoveButton } from './BulkMoveButton';\n\nimport type { File } from '../../../../../../shared/contracts/files';\nimport type {\n  FolderDefinition,\n  Folder as FolderInitial,\n} from '../../../../../../shared/contracts/folders';\n\ninterface FolderWithType extends FolderInitial {\n  type: string;\n}\n\nexport interface FileWithType extends File {\n  type: string;\n}\n\nexport interface BulkActionsProps {\n  selected: Array<FileWithType | FolderDefinition> | Array<FolderWithType | FileWithType>;\n  onSuccess: () => void;\n  currentFolder?: FolderWithType;\n}\n\nexport const BulkActions = ({ selected = [], onSuccess, currentFolder }: BulkActionsProps) => {\n  const { formatMessage } = useIntl();\n  const numberAssets = selected?.reduce(function (_this, val) {\n    return val?.type === 'folder' && 'files' in val && val?.files && 'count' in val.files\n      ? _this + val?.files?.count\n      : _this + 1;\n  }, 0);\n\n  return (\n    <Flex gap={2} paddingBottom={5}>\n      <Typography variant=\"epsilon\" textColor=\"neutral600\">\n        {formatMessage(\n          {\n            id: getTrad('list.assets.selected'),\n            defaultMessage:\n              '{numberFolders, plural, one {1 folder} other {# folders}} - {numberAssets, plural, one {1 asset} other {# assets}} selected',\n          },\n          {\n            numberFolders: selected?.filter(({ type }) => type === 'folder').length,\n            numberAssets,\n          }\n        )}\n      </Typography>\n\n      <BulkDeleteButton\n        selected={selected as Array<FileWithType | FolderDefinition>}\n        onSuccess={onSuccess}\n      />\n      <BulkMoveButton\n        currentFolder={currentFolder}\n        selected={selected as Array<FolderWithType | FileWithType>}\n        onSuccess={onSuccess}\n      />\n    </Flex>\n  );\n};\n", "import { Button } from '@strapi/design-system';\nimport { Plus } from '@strapi/icons';\nimport { EmptyPermissions } from '@strapi/icons/symbols';\nimport { useIntl } from 'react-intl';\n\nimport { EmptyAssets } from '../../../../components/EmptyAssets/EmptyAssets';\nimport { getTrad } from '../../../../utils';\n\nexport interface EmptyOrNoPermissionsProps {\n  canCreate: boolean;\n  canRead: boolean;\n  isFiltering: boolean;\n  onActionClick: () => void;\n}\n\nconst getContentIntlMessage = ({\n  isFiltering,\n  canCreate,\n  canRead,\n}: Omit<EmptyOrNoPermissionsProps, 'onActionClick'>) => {\n  if (isFiltering) {\n    return {\n      id: 'list.assets-empty.title-withSearch',\n      defaultMessage: 'There are no elements with the applied filters',\n    };\n  }\n\n  if (canRead) {\n    if (canCreate) {\n      return {\n        id: 'list.assets.empty-upload',\n        defaultMessage: 'Upload your first assets...',\n      };\n    }\n\n    return {\n      id: 'list.assets.empty',\n      defaultMessage: 'Media Library is empty',\n    };\n  }\n\n  return {\n    id: 'header.actions.no-permissions',\n    defaultMessage: 'No permissions to view',\n  };\n};\n\nexport const EmptyOrNoPermissions = ({\n  canCreate,\n  isFiltering,\n  canRead,\n  onActionClick,\n}: EmptyOrNoPermissionsProps) => {\n  const { formatMessage } = useIntl();\n  const content = getContentIntlMessage({ isFiltering, canCreate, canRead });\n\n  return (\n    <EmptyAssets\n      icon={!canRead ? EmptyPermissions : undefined}\n      action={\n        canCreate &&\n        !isFiltering && (\n          <Button variant=\"secondary\" startIcon={<Plus />} onClick={onActionClick}>\n            {formatMessage({\n              id: getTrad('header.actions.add-assets'),\n              defaultMessage: 'Add new assets',\n            })}\n          </Button>\n        )\n      }\n      content={formatMessage({\n        ...content,\n        id: getTrad(content.id),\n      })}\n    />\n  );\n};\n", "import * as React from 'react';\n\nimport { useQueryParams } from '@strapi/admin/strapi-admin';\nimport { Button, Popover } from '@strapi/design-system';\nimport { Filter } from '@strapi/icons';\nimport { useIntl } from 'react-intl';\n\nimport { FilterList } from '../../../../components/FilterList/FilterList';\nimport { FilterPopover } from '../../../../components/FilterPopover/FilterPopover';\nimport { useTracking } from '../../../../hooks/useTracking';\nimport { displayedFilters } from '../../../../utils';\n\nimport type { Query } from '../../../../../../shared/contracts/files';\nimport type { FilterListProps } from '../../../../components/FilterList/FilterList';\nimport type { FilterPopoverProps } from '../../../../components/FilterPopover/FilterPopover';\n\nexport const Filters = () => {\n  const [open, setOpen] = React.useState(false);\n  const { formatMessage } = useIntl();\n  const { trackUsage } = useTracking();\n  const [{ query }, setQuery] = useQueryParams<Query>();\n  const filters = query?.filters?.$and || [];\n\n  const handleRemoveFilter: FilterListProps['onRemoveFilter'] = (nextFilters) => {\n    setQuery({ filters: { $and: nextFilters }, page: 1 } as Query);\n  };\n\n  const handleSubmit: FilterPopoverProps['onSubmit'] = (filters) => {\n    trackUsage('didFilterMediaLibraryElements', {\n      location: 'content-manager',\n      filter: Object.keys(filters[filters.length - 1])[0],\n    });\n    setQuery({ filters: { $and: filters }, page: 1 } as Query);\n  };\n\n  return (\n    <Popover.Root open={open} onOpenChange={setOpen}>\n      <Popover.Trigger>\n        <Button variant=\"tertiary\" startIcon={<Filter />} size=\"S\">\n          {formatMessage({ id: 'app.utils.filters', defaultMessage: 'Filters' })}\n        </Button>\n      </Popover.Trigger>\n      <FilterPopover\n        displayedFilters={displayedFilters}\n        filters={filters}\n        onSubmit={handleSubmit}\n        onToggle={setOpen as FilterPopoverProps['onToggle']}\n      />\n      <FilterList\n        appliedFilters={filters as FilterListProps['appliedFilters']}\n        filtersSchema={displayedFilters}\n        onRemoveFilter={handleRemoveFilter}\n      />\n    </Popover.Root>\n  );\n};\n", "import { useQueryParams, Layouts } from '@strapi/admin/strapi-admin';\nimport { Button, Flex, Link } from '@strapi/design-system';\nimport { ArrowLeft, Plus } from '@strapi/icons';\nimport { stringify } from 'qs';\nimport { useIntl } from 'react-intl';\nimport { useLocation, NavLink } from 'react-router-dom';\n\nimport { Breadcrumbs } from '../../../../components/Breadcrumbs/Breadcrumbs';\nimport { getTrad } from '../../../../utils';\n\nimport type { Folder } from '../../../../../../shared/contracts/folders';\nimport type { CrumbDefinition } from '../../../../components/Breadcrumbs/Breadcrumbs';\n\ninterface FolderDefinition extends Omit<Folder, 'children' | 'files' | 'parent'> {\n  children: {\n    count: number;\n  };\n  files: {\n    count: number;\n  };\n  parent?: FolderDefinition;\n}\n\nexport interface HeaderProps {\n  breadcrumbs?: Array<CrumbDefinition> | null;\n  canCreate: boolean;\n  folder?: FolderDefinition | null;\n  onToggleEditFolderDialog: ({ created }?: { created?: boolean }) => void;\n  onToggleUploadAssetDialog: () => void;\n}\n\nexport const Header = ({\n  breadcrumbs = null,\n  canCreate,\n  folder = null,\n  onToggleEditFolderDialog,\n  onToggleUploadAssetDialog,\n}: HeaderProps) => {\n  const { formatMessage } = useIntl();\n  const { pathname } = useLocation();\n  const [{ query }] = useQueryParams();\n  const backQuery = {\n    ...query,\n    folder:\n      folder?.parent && typeof folder.parent !== 'number' && folder.parent.id\n        ? folder.parent.id\n        : undefined,\n    folderPath:\n      folder?.parent && typeof folder.parent !== 'number' && folder.parent.path\n        ? folder.parent.path\n        : undefined,\n  };\n\n  return (\n    <Layouts.Header\n      title={formatMessage({\n        id: getTrad('plugin.name'),\n        defaultMessage: `Media Library`,\n      })}\n      subtitle={\n        breadcrumbs &&\n        typeof breadcrumbs !== 'boolean' &&\n        folder && (\n          <Breadcrumbs\n            label={formatMessage({\n              id: getTrad('header.breadcrumbs.nav.label'),\n              defaultMessage: 'Folders navigation',\n            })}\n            breadcrumbs={breadcrumbs}\n            currentFolderId={folder?.id}\n          />\n        )\n      }\n      navigationAction={\n        folder && (\n          <Link\n            tag={NavLink}\n            startIcon={<ArrowLeft />}\n            to={`${pathname}?${stringify(backQuery, { encode: false })}`}\n          >\n            {formatMessage({\n              id: getTrad('header.actions.folder-level-up'),\n              defaultMessage: 'Back',\n            })}\n          </Link>\n        )\n      }\n      primaryAction={\n        canCreate && (\n          <Flex gap={2}>\n            <Button startIcon={<Plus />} variant=\"secondary\" onClick={onToggleEditFolderDialog}>\n              {formatMessage({\n                id: getTrad('header.actions.add-folder'),\n                defaultMessage: 'Add new folder',\n              })}\n            </Button>\n\n            <Button startIcon={<Plus />} onClick={onToggleUploadAssetDialog}>\n              {formatMessage({\n                id: getTrad('header.actions.add-assets'),\n                defaultMessage: 'Add new assets',\n              })}\n            </Button>\n          </Flex>\n        )\n      }\n    />\n  );\n};\n", "// TODO: find a better naming convention for the file that was an index file before\nimport * as React from 'react';\n\nimport {\n  Page,\n  SearchInput,\n  Pagination,\n  useTracking,\n  useQueryParams,\n  Layouts,\n} from '@strapi/admin/strapi-admin';\nimport {\n  Checkbox,\n  Box,\n  Divider,\n  Flex,\n  IconButton,\n  Typography,\n  VisuallyHidden,\n  Grid,\n} from '@strapi/design-system';\nimport { Cog, GridFour as GridIcon, List, Pencil } from '@strapi/icons';\nimport { stringify } from 'qs';\nimport { useIntl } from 'react-intl';\nimport { Link as ReactRouterLink, useNavigate, useLocation } from 'react-router-dom';\nimport { styled } from 'styled-components';\n\nimport { AIUploadModal } from '../../../ai/components/AIUploadModal';\nimport { AssetGridList } from '../../../components/AssetGridList/AssetGridList';\nimport { EditAssetDialog } from '../../../components/EditAssetDialog/EditAssetContent';\nimport { EditFolderDialog } from '../../../components/EditFolderDialog/EditFolderDialog';\nimport { FolderCard } from '../../../components/FolderCard/FolderCard/FolderCard';\nimport { FolderCardBody } from '../../../components/FolderCard/FolderCardBody/FolderCardBody';\nimport { FolderCardBodyAction } from '../../../components/FolderCard/FolderCardBodyAction/FolderCardBodyAction';\nimport { FolderCardCheckbox } from '../../../components/FolderCard/FolderCardCheckbox/FolderCardCheckbox';\nimport { FolderGridList } from '../../../components/FolderGridList/FolderGridList';\nimport { SortPicker } from '../../../components/SortPicker/SortPicker';\nimport { TableList } from '../../../components/TableList/TableList';\nimport { UploadAssetDialog } from '../../../components/UploadAssetDialog/UploadAssetDialog';\nimport { localStorageKeys, viewOptions } from '../../../constants';\nimport { useAIAvailability } from '../../../hooks/useAiAvailability';\nimport { useAssets } from '../../../hooks/useAssets';\nimport { useFolder } from '../../../hooks/useFolder';\nimport { useFolders } from '../../../hooks/useFolders';\nimport { useMediaLibraryPermissions } from '../../../hooks/useMediaLibraryPermissions';\nimport { usePersistentState } from '../../../hooks/usePersistentState';\nimport { useSelectionState } from '../../../hooks/useSelectionState';\nimport { containsAssetFilter, getBreadcrumbDataML, getFolderURL, getTrad } from '../../../utils';\n\nimport { BulkActions } from './components/BulkActions';\nimport { EmptyOrNoPermissions } from './components/EmptyOrNoPermissions';\nimport { Filters } from './components/Filters';\nimport { Header } from './components/Header';\n\nimport type { BulkActionsProps } from './components/BulkActions';\nimport type { HeaderProps } from './components/Header';\nimport type { Query } from '../../../../../shared/contracts/files';\nimport type { FolderDefinition } from '../../../../../shared/contracts/folders';\nimport type { AssetGridListProps } from '../../../components/AssetGridList/AssetGridList';\nimport type { Asset } from '../../../components/EditAssetDialog/EditAssetContent';\nimport type { FolderRow, FileRow, TableListProps } from '../../../components/TableList/TableList';\n\nconst BoxWithHeight = styled(Box)`\n  height: 3.2rem;\n  display: flex;\n  align-items: center;\n`;\n\nconst TypographyMaxWidth = styled(Typography)`\n  max-width: 100%;\n`;\n\nconst ActionContainer = styled(Box)`\n  svg {\n    path {\n      fill: ${({ theme }) => theme.colors.neutral500};\n    }\n  }\n`;\n\nexport const MediaLibrary = () => {\n  const navigate = useNavigate();\n  const {\n    canRead,\n    canCreate,\n    canUpdate,\n    canCopyLink,\n    canDownload,\n    canConfigureView,\n    isLoading: permissionsLoading,\n  } = useMediaLibraryPermissions();\n  const { isEnabled: isAiEnabled, status: aiAvailabilityStatus } = useAIAvailability();\n  const currentFolderToEditRef = React.useRef<HTMLDivElement>();\n  const { formatMessage } = useIntl();\n  const { pathname } = useLocation();\n  const { trackUsage } = useTracking();\n  const [{ query }, setQuery] = useQueryParams<Query>();\n  const isFiltering = Boolean(query._q || query.filters);\n  const [view, setView] = usePersistentState(localStorageKeys.view, viewOptions.GRID);\n  const isGridView = view === viewOptions.GRID;\n\n  const {\n    data: assetsData,\n    isLoading: assetsLoading,\n    error: assetsError,\n  } = useAssets({\n    skipWhen: !canRead,\n    query,\n  });\n\n  const {\n    data: foldersData,\n    isLoading: foldersLoading,\n    error: foldersError,\n  } = useFolders({\n    enabled: canRead && assetsData?.pagination?.page === 1 && !containsAssetFilter(query),\n    query,\n  });\n\n  const {\n    data: currentFolder,\n    isLoading: isCurrentFolderLoading,\n    error: currentFolderError,\n  } = useFolder(query?.folder as number | null | undefined, {\n    enabled: canRead && !!query?.folder,\n  });\n\n  // Folder was not found: redirect to the media library root\n  if (currentFolderError?.name === 'NotFoundError') {\n    navigate(pathname);\n  }\n\n  const folders =\n    foldersData?.map((folder) => ({\n      ...folder,\n      type: 'folder',\n      folderURL: getFolderURL(pathname, query, {\n        folder: folder.id.toString(),\n        folderPath: folder.path,\n      }),\n      isSelectable: canUpdate,\n    })) ?? [];\n  const folderCount = folders?.length || 0;\n  const assets =\n    assetsData?.results?.map((asset) => ({ ...asset, type: 'asset', isSelectable: canUpdate })) ||\n    [];\n  const assetCount = assets?.length ?? 0;\n  const totalAssetCount = assetsData?.pagination?.total;\n\n  const isLoading =\n    isCurrentFolderLoading ||\n    foldersLoading ||\n    permissionsLoading ||\n    assetsLoading ||\n    aiAvailabilityStatus === 'loading';\n  const [showUploadAssetDialog, setShowUploadAssetDialog] = React.useState(false);\n  const [showEditFolderDialog, setShowEditFolderDialog] = React.useState(false);\n  const [assetToEdit, setAssetToEdit] = React.useState<Asset | undefined>(undefined);\n  const [folderToEdit, setFolderToEdit] = React.useState<FolderRow | undefined | null>(undefined);\n  const [selected, { selectOne, selectAll, setSelections }] = useSelectionState<\n    FolderRow | FileRow\n  >(['type', 'id'], []);\n  // reset selection when folder changes to hide bulk actions\n  React.useEffect(() => {\n    setSelections([]);\n  }, [query.folder, setSelections]);\n\n  const indeterminateBulkSelect =\n    selected?.length > 0 && selected?.length !== assetCount + folderCount;\n  const toggleUploadAssetDialog = () => setShowUploadAssetDialog((prev) => !prev);\n  const toggleEditFolderDialog = ({ created = false } = {}) => {\n    // folders are only displayed on the first page, therefore\n    // we have to navigate the user to that page, in case a folder\n    // was created successfully in order for them to see it\n    if (created && query?.page !== '1') {\n      setQuery({\n        ...query,\n        page: 1,\n      });\n    }\n\n    setShowEditFolderDialog((prev) => !prev);\n  };\n\n  const handleBulkSelect = (\n    checked: boolean | 'indeterminate',\n    elements?: FolderRow[] | FileRow[]\n  ) => {\n    if (checked) {\n      trackUsage('didSelectAllMediaLibraryElements');\n    }\n\n    selectAll(elements as (FolderRow | FileRow)[]);\n  };\n\n  const handleChangeSort = (value: Query['sort'] | string) => {\n    trackUsage('didSortMediaLibraryElements', {\n      location: 'upload',\n      sort: value,\n    });\n    setQuery({ sort: value as Query['sort'] });\n  };\n\n  const handleEditFolder = (folder: FolderRow) => {\n    setFolderToEdit(folder);\n    setShowEditFolderDialog(true);\n  };\n\n  const handleEditFolderClose = (payload?: { created?: boolean | undefined }) => {\n    setFolderToEdit(null);\n    toggleEditFolderDialog(payload);\n\n    if (currentFolderToEditRef.current) {\n      currentFolderToEditRef.current.focus();\n    }\n  };\n\n  const handleAssetDeleted = (numberOfAssets: number) => {\n    if (\n      numberOfAssets === assetCount &&\n      assetsData?.pagination?.page === assetsData?.pagination?.pageCount &&\n      assetsData?.pagination?.page &&\n      assetsData.pagination.page > 1\n    ) {\n      setQuery({\n        ...query,\n        page: assetsData.pagination.page - 1,\n      });\n    }\n  };\n\n  const handleBulkActionSuccess = () => {\n    selectAll();\n\n    handleAssetDeleted(selected.length);\n  };\n\n  if (isLoading) {\n    return <Page.Loading />;\n  }\n\n  if (assetsError || foldersError || aiAvailabilityStatus === 'error') {\n    return <Page.Error />;\n  }\n\n  return (\n    <Layouts.Root>\n      <Page.Main>\n        <Header\n          breadcrumbs={\n            !isCurrentFolderLoading\n              ? (getBreadcrumbDataML(currentFolder!, {\n                  pathname,\n                  query,\n                }) as HeaderProps['breadcrumbs'])\n              : null\n          }\n          canCreate={canCreate}\n          onToggleEditFolderDialog={toggleEditFolderDialog}\n          onToggleUploadAssetDialog={toggleUploadAssetDialog}\n          folder={currentFolder as HeaderProps['folder']}\n        />\n        <Layouts.Action\n          startActions={\n            <>\n              {canUpdate && isGridView && (assetCount > 0 || folderCount > 0) && (\n                <BoxWithHeight\n                  paddingLeft={2}\n                  paddingRight={2}\n                  background=\"neutral0\"\n                  hasRadius\n                  borderColor=\"neutral200\"\n                >\n                  <Checkbox\n                    aria-label={formatMessage({\n                      id: getTrad('bulk.select.label'),\n                      defaultMessage: 'Select all folders & assets',\n                    })}\n                    checked={\n                      indeterminateBulkSelect\n                        ? 'indeterminate'\n                        : (assetCount > 0 || folderCount > 0) &&\n                          selected.length === assetCount + folderCount\n                    }\n                    onCheckedChange={(e) =>\n                      handleBulkSelect(e, [...assets, ...folders] as FolderRow[] | FileRow[])\n                    }\n                  />\n                </BoxWithHeight>\n              )}\n              {canRead && isGridView && (\n                <SortPicker value={query?.sort} onChangeSort={handleChangeSort} />\n              )}\n              {canRead && <Filters />}\n            </>\n          }\n          endActions={\n            <>\n              {canConfigureView ? (\n                <ActionContainer paddingTop={1} paddingBottom={1}>\n                  <IconButton\n                    tag={ReactRouterLink}\n                    to={{\n                      pathname: `${pathname}/configuration`,\n                      search: stringify(query, { encode: false }),\n                    }}\n                    label={formatMessage({\n                      id: 'app.links.configure-view',\n                      defaultMessage: 'Configure the view',\n                    })}\n                  >\n                    <Cog />\n                  </IconButton>\n                </ActionContainer>\n              ) : null}\n              <ActionContainer paddingTop={1} paddingBottom={1}>\n                <IconButton\n                  label={\n                    isGridView\n                      ? formatMessage({\n                          id: getTrad('view-switch.list'),\n                          defaultMessage: 'List View',\n                        })\n                      : formatMessage({\n                          id: getTrad('view-switch.grid'),\n                          defaultMessage: 'Grid View',\n                        })\n                  }\n                  onClick={() => setView(isGridView ? viewOptions.LIST : viewOptions.GRID)}\n                >\n                  {isGridView ? <List /> : <GridIcon />}\n                </IconButton>\n              </ActionContainer>\n              <SearchInput\n                label={formatMessage({\n                  id: getTrad('search.label'),\n                  defaultMessage: 'Search for an asset',\n                })}\n                trackedEvent=\"didSearchMediaLibraryElements\"\n                trackedEventDetails={{ location: 'upload' }}\n              />\n            </>\n          }\n        />\n\n        <Layouts.Content>\n          {selected.length > 0 && (\n            <BulkActions\n              currentFolder={currentFolder as BulkActionsProps['currentFolder']}\n              selected={selected as BulkActionsProps['selected']}\n              onSuccess={handleBulkActionSuccess}\n            />\n          )}\n\n          {folderCount === 0 && assetCount === 0 && (\n            <EmptyOrNoPermissions\n              canCreate={canCreate}\n              canRead={canRead}\n              isFiltering={isFiltering}\n              onActionClick={toggleUploadAssetDialog}\n            />\n          )}\n\n          {/* TODO: fix AssetListTable should handle no assets views (loading) */}\n          {canRead && !isGridView && (assetCount > 0 || folderCount > 0) && (\n            <TableList\n              assetCount={assetCount}\n              folderCount={folderCount}\n              indeterminate={indeterminateBulkSelect}\n              onChangeSort={handleChangeSort}\n              onChangeFolder={(folderID, folderPath) =>\n                navigate(getFolderURL(pathname, query, { folder: folderID.toString(), folderPath }))\n              }\n              onEditAsset={setAssetToEdit as TableListProps['onEditAsset']}\n              onEditFolder={handleEditFolder}\n              onSelectOne={selectOne}\n              onSelectAll={handleBulkSelect as TableListProps['onSelectAll']}\n              rows={[...folders, ...assets] as TableListProps['rows']}\n              selected={selected as TableListProps['selected']}\n              shouldDisableBulkSelect={!canUpdate}\n              sortQuery={query?.sort ?? ''}\n            />\n          )}\n\n          {canRead && isGridView && (\n            <>\n              {folderCount > 0 && (\n                <FolderGridList\n                  title={\n                    // Folders title should only appear if:\n                    // user is filtering and there are assets to display, to divide both type of elements\n                    // user is not filtering\n                    (((isFiltering && assetCount > 0) || !isFiltering) &&\n                      formatMessage(\n                        {\n                          id: getTrad('list.folders.title'),\n                          defaultMessage: 'Folders ({count})',\n                        },\n                        { count: folderCount }\n                      )) ||\n                    ''\n                  }\n                >\n                  {folders.map((folder) => {\n                    const selectedFolders = selected.filter(({ type }) => type === 'folder');\n                    const isSelected = !!selectedFolders.find(\n                      (currentFolder) => currentFolder.id === folder.id\n                    );\n\n                    const url = getFolderURL(pathname, query, {\n                      folder: folder?.id.toString(),\n                      folderPath: folder?.path,\n                    });\n\n                    return (\n                      <Grid.Item\n                        col={3}\n                        key={`folder-${folder.id}`}\n                        direction=\"column\"\n                        alignItems=\"stretch\"\n                      >\n                        <FolderCard\n                          ref={\n                            folderToEdit && folder.id === folderToEdit.id\n                              ? currentFolderToEditRef\n                              : undefined\n                          }\n                          ariaLabel={folder.name}\n                          id={`folder-${folder.id}`}\n                          to={url}\n                          startAction={\n                            folder.isSelectable ? (\n                              <FolderCardCheckbox\n                                data-testid={`folder-checkbox-${folder.id}`}\n                                checked={isSelected}\n                                onCheckedChange={() => selectOne(folder)}\n                              />\n                            ) : null\n                          }\n                          cardActions={\n                            <IconButton\n                              label={formatMessage({\n                                id: getTrad('list.folder.edit'),\n                                defaultMessage: 'Edit folder',\n                              })}\n                              onClick={() => handleEditFolder(folder)}\n                            >\n                              <Pencil />\n                            </IconButton>\n                          }\n                        >\n                          <FolderCardBody>\n                            <FolderCardBodyAction to={url}>\n                              <Flex tag=\"h2\" direction=\"column\" alignItems=\"start\" maxWidth=\"100%\">\n                                <TypographyMaxWidth\n                                  fontWeight=\"semiBold\"\n                                  textColor=\"neutral800\"\n                                  ellipsis\n                                >\n                                  {folder.name}\n                                  <VisuallyHidden>:</VisuallyHidden>\n                                </TypographyMaxWidth>\n\n                                <TypographyMaxWidth\n                                  tag=\"span\"\n                                  textColor=\"neutral600\"\n                                  variant=\"pi\"\n                                  ellipsis\n                                >\n                                  {formatMessage(\n                                    {\n                                      id: getTrad('list.folder.subtitle'),\n                                      defaultMessage:\n                                        '{folderCount, plural, =0 {# folder} one {# folder} other {# folders}}, {filesCount, plural, =0 {# asset} one {# asset} other {# assets}}',\n                                    },\n                                    {\n                                      folderCount: (folder as FolderDefinition).children?.count,\n                                      filesCount: (folder as FolderDefinition).files?.count,\n                                    }\n                                  )}\n                                </TypographyMaxWidth>\n                              </Flex>\n                            </FolderCardBodyAction>\n                          </FolderCardBody>\n                        </FolderCard>\n                      </Grid.Item>\n                    );\n                  })}\n                </FolderGridList>\n              )}\n\n              {assetCount > 0 && folderCount > 0 && (\n                <Box paddingTop={6} paddingBottom={4}>\n                  <Divider />\n                </Box>\n              )}\n\n              {assetCount > 0 && (\n                <AssetGridList\n                  assets={assets}\n                  onEditAsset={setAssetToEdit as AssetGridListProps['onEditAsset']}\n                  onSelectAsset={selectOne}\n                  selectedAssets={\n                    selected.filter(\n                      ({ type }) => type === 'asset'\n                    ) as AssetGridListProps['selectedAssets']\n                  }\n                  title={\n                    // Assets title should only appear if:\n                    // - user is not filtering\n                    // - user is filtering and there are folders to display, to separate them\n                    // - user is on page 1 since folders won't appear on any other page than the first one (no need to visually separate them)\n                    ((!isFiltering || (isFiltering && folderCount > 0)) &&\n                      assetsData?.pagination?.page === 1 &&\n                      formatMessage(\n                        {\n                          id: getTrad('list.assets.title'),\n                          defaultMessage: 'Assets ({count})',\n                        },\n                        { count: totalAssetCount }\n                      )) ||\n                    ''\n                  }\n                />\n              )}\n            </>\n          )}\n          <Pagination.Root {...assetsData?.pagination}>\n            <Pagination.PageSize />\n            <Pagination.Links />\n          </Pagination.Root>\n        </Layouts.Content>\n      </Page.Main>\n      {showUploadAssetDialog &&\n        (isAiEnabled ? (\n          <AIUploadModal\n            open={showUploadAssetDialog}\n            onClose={toggleUploadAssetDialog}\n            folderId={query?.folder ? Number(query.folder) : null}\n          />\n        ) : (\n          <UploadAssetDialog\n            open={showUploadAssetDialog}\n            onClose={toggleUploadAssetDialog}\n            trackedLocation=\"upload\"\n            folderId={query?.folder as string | number | null | undefined}\n          />\n        ))}\n      {showEditFolderDialog && (\n        <EditFolderDialog\n          open={showEditFolderDialog}\n          onClose={() => handleEditFolderClose()}\n          folder={folderToEdit as FolderDefinition}\n          parentFolderId={query?.folder as string | number | null | undefined}\n          location=\"upload\"\n        />\n      )}\n      {assetToEdit && (\n        <EditAssetDialog\n          onClose={(editedAsset) => {\n            // The asset has been deleted\n            if (editedAsset === null) {\n              handleAssetDeleted(1);\n            }\n\n            setAssetToEdit(undefined);\n          }}\n          open={!!assetToEdit}\n          asset={assetToEdit}\n          canUpdate={canUpdate}\n          canCopyLink={canCopyLink}\n          canDownload={canDownload}\n          trackedLocation=\"upload\"\n        />\n      )}\n    </Layouts.Root>\n  );\n};\n", "// TODO: find a better naming convention for the file that was an index file before\nimport * as React from 'react';\n\nimport { Page, useQueryParams } from '@strapi/admin/strapi-admin';\nimport { useIntl } from 'react-intl';\nimport { Route, Routes } from 'react-router-dom';\n\nimport { useConfig } from '../../hooks/useConfig';\nimport { getTrad } from '../../utils';\n\nimport { MediaLibrary } from './MediaLibrary/MediaLibrary';\n\nimport type { Configuration } from '../../../../shared/contracts/configuration';\n\nconst ConfigureTheView = React.lazy(async () =>\n  import('./ConfigureTheView/ConfigureTheView').then((mod) => ({ default: mod.ConfigureTheView }))\n);\n\nexport const Upload = () => {\n  const {\n    config: { isLoading, isError, data: config },\n  } = useConfig() as { config: { isLoading: boolean; isError: boolean; data: Configuration } };\n\n  const [{ rawQuery }, setQuery] = useQueryParams();\n  const { formatMessage } = useIntl();\n  const title = formatMessage({ id: getTrad('plugin.name'), defaultMessage: 'Media Library' });\n\n  React.useEffect(() => {\n    if (isLoading || isError || rawQuery) {\n      return;\n    }\n    setQuery({\n      sort: config.sort,\n      page: 1,\n      pageSize: config.pageSize,\n    });\n  }, [isLoading, isError, config, rawQuery, setQuery]);\n\n  if (isLoading) {\n    return <Page.Loading />;\n  }\n\n  return (\n    <Page.Main>\n      <Page.Title>{title}</Page.Title>\n      {rawQuery ? (\n        <React.Suspense fallback={<Page.Loading />}>\n          <Routes>\n            <Route index element={<MediaLibrary />} />\n            <Route\n              path=\"configuration\"\n              element={<ConfigureTheView config={config as Configuration} />}\n            />\n          </Routes>\n        </React.Suspense>\n      ) : null}\n    </Page.Main>\n  );\n};\n"],
  "mappings": "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",
  "names": ["useBulkEdit", "formatMessage", "useIntl", "toggleNotification", "useNotification", "queryClient", "useQueryClient", "post", "useFetchClient", "bulkEditQuery", "updates", "mutation", "useMutation", "onSuccess", "res", "data", "length", "refetchQueries", "pluginId", "active", "type", "message", "id", "getTrad", "defaultMessage", "edit", "mutateAsync", "CardActionsContainer", "styled", "CardAction", "CardContainer", "Box", "theme", "colors", "neutral0", "neutral150", "borderRadius", "AssetCardActions", "asset", "formatMessage", "useIntl", "dispatch", "useAIUploadModalContext", "s", "state", "onClose", "canUpdate", "canCopyLink", "canDownload", "useMediaLibraryPermissions", "isEditModalOpen", "setIsEditModalOpen", "useState", "removeAsset", "useRemoveAsset", "handleConfirmRemove", "event", "preventDefault", "id", "type", "payload", "uploadedAssets", "length", "handlePropagationClick", "stopPropagation", "handleEditAsset", "editedAsset", "_jsxs", "onClick", "position", "Dialog", "Root", "_jsx", "Trigger", "IconButton", "label", "getTrad", "defaultMessage", "Trash", "ConfirmDialog", "onConfirm", "Modal", "open", "onOpenChange", "Pencil", "Content", "EditAssetContent", "isLocal", "folder", "arg", "omitFields", "omitActions", "Extension", "span", "VideoPreviewWrapper", "VideoTimerOverlay", "CardTimer", "AudioPreviewWrapper", "Asset", "assetType", "thumbnailUrl", "assetUrl", "duration", "setDuration", "formattedDuration", "formatDuration", "undefined", "AssetType", "Image", "CardAsset", "src", "size", "alt", "alternativeText", "name", "Video", "VideoPreview", "url", "mime", "onLoadDuration", "Audio", "AudioPreview", "StyledCardBody", "CardBody", "spaces", "StyledCard", "Card", "getAssetBadgeLabel", "DocType", "Pdf", "Csv", "Xls", "Zip", "AIAssetCard", "onCaptionChange", "onAltTextChange", "wasAltTextChanged", "wasCaptionChanged", "typeFromMime", "prefixFileUrlWithBackendUrl", "formats", "thumbnail", "subtitle", "height", "width", "formattedSize", "formatBytes", "fullSubtitle", "caption", "setCaption", "React", "useEffect", "altText", "setAltText", "Grid", "Item", "col", "alignItems", "shadow", "padding", "CardHeader", "style", "borderStyle", "CardContent", "Flex", "justifyContent", "Typography", "tag", "CardTitle", "CardBadge", "CardSubtitle", "getFileExtension", "ext", "flex", "direction", "gap", "Field", "Label", "TextInput", "value", "onChange", "e", "target", "placeholder", "endAction", "Sparkle", "fill", "hint", "Hint", "SkeletonBox", "neutral100", "AIAssetCardSkeletons", "count", "skeletons", "Array", "from", "_", "i", "map", "index", "background", "borderColor", "borderWidth", "marginBottom", "display", "marginTop", "StyledModalBody", "styled", "Modal", "Body", "theme", "spaces", "StyledAlert", "Alert", "ModalContent", "onClose", "formatMessage", "useIntl", "state", "useAIUploadModalContext", "s", "dispatch", "folderId", "upload", "useUpload", "edit", "isLoading", "isSaving", "useBulkEdit", "isUploading", "setIsUploading", "useState", "uploadError", "setUploadError", "trackUsage", "useTracking", "handleCaptionChange", "assetId", "caption", "type", "payload", "id", "handleAltTextChange", "altText", "resetState", "handleFinish", "hasUnsavedChanges", "assetsToUpdate", "uploadedAssets", "filter", "asset", "wasCaptionChanged", "wasAltTextChanged", "file", "length", "some", "updates", "map", "fileInfo", "name", "alternativeText", "folder", "err", "console", "error", "handleCancel", "handleUpload", "assets", "assetsForUpload", "Number", "undefined", "uploadedFiles", "filesWithFolder", "Error", "assetsToUploadLength", "_jsx", "Content", "AddAssetStep", "onAddAsset", "_jsxs", "Header", "Title", "getTrad", "defaultMessage", "AIAssetCardSkeletons", "count", "title", "closeLabel", "variant", "Footer", "Button", "onClick", "loading", "Flex", "gap", "direction", "alignItems", "AIAssetCard", "onCaptionChange", "onAltTextChange", "AIUploadModalContext", "createContext", "reducer", "action", "produce", "draft", "find", "a", "assetIndex", "findIndex", "editedAsset", "forEach", "AIUploadModal", "open", "useReducer", "handleClose", "useCallback", "Root", "onOpenChange", "FolderCardCheckbox", "props", "id", "useFolderCard", "_jsx", "Box", "position", "zIndex", "Checkbox", "aria-labelledby", "useAIAvailability", "isAiAvailable", "useGlobalAIAvailability", "status", "data", "useSettings", "isEnabled", "aiMetadata", "getBreadcrumbDataML", "folder", "pathname", "query", "data", "id", "label", "getTrad", "defaultMessage", "href", "getFolderURL", "undefined", "parent", "push", "name", "toString", "folderPath", "path", "BulkDeleteButton", "selected", "onSuccess", "formatMessage", "useIntl", "remove", "useBulkRemove", "handleConfirmRemove", "_jsxs", "Dialog", "Root", "_jsx", "Trigger", "Button", "variant", "size", "startIcon", "Trash", "id", "defaultMessage", "ConfirmDialog", "onConfirm", "useBulkMove", "formatMessage", "useIntl", "toggleNotification", "useNotification", "queryClient", "useQueryClient", "post", "useFetchClient", "bulkMoveQuery", "destinationFolderId", "filesAndFolders", "payload", "reduce", "acc", "selected", "id", "type", "key", "push", "mutation", "useMutation", "onSuccess", "res", "data", "files", "length", "refetchQueries", "pluginId", "active", "message", "getTrad", "defaultMessage", "move", "mutateAsync", "BulkMoveDialog", "onClose", "selected", "currentFolder", "formatMessage", "useIntl", "data", "folderStructure", "isLoading", "useFolderStructure", "move", "useBulkMove", "handleSubmit", "values", "setErrors", "destination", "destinationValue", "value", "error", "normalizedError", "normalizeAPIError", "formikErrors", "errors", "reduce", "acc", "path", "length", "defaultMessage", "isEmpty", "_jsx", "Modal", "Content", "Body", "Flex", "justifyContent", "paddingTop", "paddingBottom", "Loader", "id", "getTrad", "initialFormData", "label", "name", "Formik", "validateOnChange", "onSubmit", "initialValues", "setFieldValue", "_jsxs", "Form", "noValidate", "Header", "Title", "Grid", "Root", "gap", "Item", "xs", "col", "direction", "alignItems", "Field", "Label", "SelectTree", "options", "onChange", "defaultValue", "undefined", "menuPortalTarget", "document", "querySelector", "inputId", "ariaErrorMessage", "Typography", "variant", "tag", "textColor", "Footer", "Close", "Button", "type", "loading", "BulkMoveButton", "selected", "onSuccess", "currentFolder", "formatMessage", "useIntl", "showConfirmDialog", "setShowConfirmDialog", "useState", "handleConfirmMove", "_jsxs", "Modal", "Root", "open", "onOpenChange", "_jsx", "Trigger", "Button", "variant", "size", "startIcon", "Folder", "id", "defaultMessage", "BulkMoveDialog", "onClose", "BulkActions", "selected", "onSuccess", "currentFolder", "formatMessage", "useIntl", "numberAssets", "reduce", "_this", "val", "type", "files", "count", "_jsxs", "Flex", "gap", "paddingBottom", "_jsx", "Typography", "variant", "textColor", "id", "getTrad", "defaultMessage", "numberFolders", "filter", "length", "BulkDeleteButton", "BulkMoveButton", "getContentIntlMessage", "isFiltering", "canCreate", "canRead", "id", "defaultMessage", "EmptyOrNoPermissions", "onActionClick", "formatMessage", "useIntl", "content", "_jsx", "EmptyAssets", "icon", "EmptyPermissions", "undefined", "action", "Button", "variant", "startIcon", "Plus", "onClick", "getTrad", "Filters", "open", "setOpen", "useState", "formatMessage", "useIntl", "trackUsage", "useTracking", "query", "setQuery", "useQueryParams", "filters", "$and", "handleRemoveFilter", "nextFilters", "page", "handleSubmit", "location", "filter", "Object", "keys", "length", "_jsxs", "Popover", "Root", "onOpenChange", "_jsx", "Trigger", "Button", "variant", "startIcon", "Filter", "size", "id", "defaultMessage", "FilterPopover", "displayedFilters", "onSubmit", "onToggle", "FilterList", "appliedFilters", "filtersSchema", "onRemoveFilter", "Header", "breadcrumbs", "canCreate", "folder", "onToggleEditFolderDialog", "onToggleUploadAssetDialog", "formatMessage", "useIntl", "pathname", "useLocation", "query", "useQueryParams", "backQuery", "parent", "id", "undefined", "folderPath", "path", "_jsx", "Layouts", "title", "getTrad", "defaultMessage", "subtitle", "Breadcrumbs", "label", "currentFolderId", "navigationAction", "Link", "tag", "NavLink", "startIcon", "ArrowLeft", "to", "stringify", "encode", "primaryAction", "_jsxs", "Flex", "gap", "Button", "Plus", "variant", "onClick", "BoxWithHeight", "styled", "Box", "TypographyMaxWidth", "Typography", "ActionContainer", "theme", "colors", "neutral500", "MediaLibrary", "navigate", "useNavigate", "canRead", "canCreate", "canUpdate", "canCopyLink", "canDownload", "canConfigureView", "isLoading", "permissionsLoading", "useMediaLibraryPermissions", "isEnabled", "isAiEnabled", "status", "aiAvailabilityStatus", "useAIAvailability", "currentFolderToEditRef", "useRef", "formatMessage", "useIntl", "pathname", "useLocation", "trackUsage", "useTracking", "query", "setQuery", "useQueryParams", "isFiltering", "Boolean", "_q", "filters", "view", "setView", "usePersistentState", "localStorageKeys", "viewOptions", "GRID", "isGridView", "data", "assetsData", "assetsLoading", "error", "assetsError", "useAssets", "skipWhen", "foldersData", "foldersLoading", "foldersError", "useFolders", "enabled", "pagination", "page", "containsAssetFilter", "currentFolder", "isCurrentFolderLoading", "currentFolderError", "useFolder", "folder", "name", "folders", "map", "type", "folderURL", "getFolderURL", "id", "toString", "folderPath", "path", "isSelectable", "folderCount", "length", "assets", "results", "asset", "assetCount", "totalAssetCount", "total", "showUploadAssetDialog", "setShowUploadAssetDialog", "useState", "showEditFolderDialog", "setShowEditFolderDialog", "assetToEdit", "setAssetToEdit", "undefined", "folderToEdit", "setFolderToEdit", "selected", "selectOne", "selectAll", "setSelections", "useSelectionState", "React", "useEffect", "indeterminateBulkSelect", "toggleUploadAssetDialog", "prev", "toggleEditFolderDialog", "created", "handleBulkSelect", "checked", "elements", "handleChangeSort", "value", "location", "sort", "handleEditFolder", "handleEditFolderClose", "payload", "current", "focus", "handleAssetDeleted", "numberOfAssets", "pageCount", "handleBulkActionSuccess", "_jsx", "Page", "Loading", "Error", "_jsxs", "Layouts", "Root", "Main", "Header", "breadcrumbs", "getBreadcrumbDataML", "onToggleEditFolderDialog", "onToggleUploadAssetDialog", "Action", "startActions", "_Fragment", "paddingLeft", "paddingRight", "background", "hasRadius", "borderColor", "Checkbox", "aria-label", "getTrad", "defaultMessage", "onCheckedChange", "e", "SortPicker", "onChangeSort", "Filters", "endActions", "paddingTop", "paddingBottom", "IconButton", "tag", "ReactRouterLink", "to", "search", "stringify", "encode", "label", "Cog", "onClick", "LIST", "List", "GridIcon", "SearchInput", "trackedEvent", "trackedEventDetails", "Content", "BulkActions", "onSuccess", "EmptyOrNoPermissions", "onActionClick", "TableList", "indeterminate", "onChangeFolder", "folderID", "onEditAsset", "onEditFolder", "onSelectOne", "onSelectAll", "rows", "shouldDisableBulkSelect", "sortQuery", "FolderGridList", "title", "count", "selectedFolders", "filter", "isSelected", "find", "url", "Grid", "Item", "col", "direction", "alignItems", "FolderCard", "ref", "ariaLabel", "startAction", "FolderCardCheckbox", "data-testid", "cardActions", "Pencil", "FolderCardBody", "FolderCardBodyAction", "Flex", "maxWidth", "fontWeight", "textColor", "ellipsis", "VisuallyHidden", "variant", "children", "filesCount", "files", "Divider", "AssetGridList", "onSelectAsset", "selectedAssets", "Pagination", "PageSize", "Links", "AIUploadModal", "open", "onClose", "folderId", "Number", "UploadAssetDialog", "trackedLocation", "EditFolderDialog", "parentFolderId", "EditAssetDialog", "editedAsset", "ConfigureTheView", "lazy", "then", "mod", "default", "Upload", "config", "isLoading", "isError", "data", "useConfig", "rawQuery", "setQuery", "useQueryParams", "formatMessage", "useIntl", "title", "id", "getTrad", "defaultMessage", "React", "useEffect", "sort", "page", "pageSize", "_jsx", "Page", "Loading", "_jsxs", "Main", "Title", "Suspense", "fallback", "Routes", "Route", "index", "element", "MediaLibrary", "path"]
}
